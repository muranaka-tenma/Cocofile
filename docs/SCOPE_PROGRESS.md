# CocoFile（ココファイル） - 開発進捗管理

**バージョン**: 0.1.0 (MVP)
**最終更新日**: 2025年11月6日
**ステータス**: ✅ **v0.1.0 Alpha リリース準備完了 - Phase 9 完了**

## 1. 基本情報

- **プロジェクト名**: CocoFile（ココファイル）
- **アシスタント愛称**: ココ
- **ステータス**: ✅ **v0.1.0 Alpha リリース準備完了** (Phase 9 完了)
- **完了タスク数**: 20/20
- **進捗率**: 100% (MVP達成、Linux版リリース準備完了)
- **次のマイルストーン**: GitHubリリース公開 → Phase 10 クロスプラットフォーム

## 2. 実装概要

CocoFile（ココ）は、営業マンの「先週保存したあのファイル、どこだっけ？」を解決する、PC画面端常駐型スマートファイルアシスタントです。完全ローカル動作で、分散したファイルを一元管理し、自然な言葉での検索を実現します。

## 3. 参照ドキュメント

- [要件定義書](/docs/requirements.md) - プロジェクトの全体要件
- [CLAUDE.md](/CLAUDE.md) - プロジェクト設定とコーディング規約

## 4. 統合画面管理表

| ID | 画面名 | 機能概要 | 優先度 | 着手 | 完了 |
|----|--------|---------|--------|------|------|
| S-001 | メイン検索画面 | 高速検索、フィルター、結果表示、プレビュー | 高 | [✓] | [✓] |
| S-002 | 設定画面 | 監視フォルダ管理、UI設定、タグ辞書 | 高 | [✓] | [✓] |
| S-003 | スキャン・インデックス管理画面 | 手動スキャン、進捗表示、重複検出 | 高 | [✓] | [✓] |
| S-004 | タグ管理画面 | タグ一覧、統合、編集、カラー設定 | 中 | [✓] | [✓] |
| S-005 | ファイル詳細・編集画面 | プレビュー、メタデータ編集、タグ編集 | 高 | [✓] | [✓] |

## 5. 開発フロー進捗状況

| フェーズ | 状態 | 進捗 | 成果物 | 備考 |
|---------|------|------|--------|------|
| **0. プロジェクト準備** | ✅ 完了 | 100% | プロジェクトディレクトリ | 2025/11/4完了 |
| **1. 要件定義** | ✅ 完了 | 100% | requirements.md | 2025/11/4完了 |
| **2. 開発環境構築** | ✅ 完了 | 100% | Tauri/Python/uv環境 | 2025/11/4完了 |
| **3. データベース設計** | ✅ 完了 | 100% | SQLite FTS5 + N-gram | 2025/11/4完了 |
| **4. コア機能実装** | ✅ 完了 | 100% | Python分析エンジン(バイナリ化) | 2025/11/4完了 |
| **5. UI実装** | ✅ 完了 | 100% | 5画面 + ホットキー機能 | 2025/11/4完了 |
| **6. テスト** | ✅ 完了 | 80% | 統合テスト完了、GUIテスト準備完了 | 2025/11/5完了 |
| **7. リリース準備** | ✅ 完了 | 80% | Linuxビルド、ドキュメント | 2025/11/5完了 |
| **8. 完了準備** | ✅ 完了 | 100% | APIリファレンス、完了サマリー | 2025/11/5完了 |
| **9. テスト実施・リリース準備** | ✅ 完了 | 100% | パフォーマンス測定、リリース手順書 | 2025/11/6完了 |

## 6. 開発マイルストーン

### Phase 1: MVP（最小機能版） - 目標3-4ヶ月

#### 環境構築
- [x] Tauri 2.0環境セットアップ (v2.9.2)
- [x] Python 3.10+環境セットアップ (v3.12.3 + uv)
- [x] SQLite + FTS5 + N-gramトークナイザーセットアップ (rusqlite bundled)
- [x] 開発ツール導入（VSCode拡張等）

#### コア機能実装
- [x] ファイル監視システム（tauri-plugin-fs-watch）
- [x] ファイル分析エンジン（PDF/Excel/Word/PPT）
  - [x] pdfplumber統合 (v0.11.0)
  - [x] openpyxl統合 (v3.1.2)
  - [x] docx2txt統合 (v0.8)
  - [x] python-pptx統合 (v0.6.23)
- [x] SQLiteデータベース設計・実装
- [x] FTS5全文検索エンジン（N-gram）
- [x] ハッシュ値計算（重複検出用）

#### UI実装
- [x] S-001: メイン検索画面 (375行)
  - [x] 検索ボックス
  - [x] フィルター機能
  - [x] 検索結果表示
  - [x] 画面端自動収納
  - [x] ホットキー (Ctrl+Shift+F / Cmd+Shift+F)
- [x] S-002: 設定画面 (315行)
- [x] S-003: スキャン・インデックス管理画面 (300行)
- [x] S-004: タグ管理画面 (478行)
- [x] S-005: ファイル詳細・編集画面 (362行)

#### 基本機能
- [x] キーワード検索 (N-gram FTS5)
- [x] タグ検索・フィルター
- [ ] 日付範囲フィルター (UI未実装、DB対応済み)
- [x] ルールベース自動タグ提案
- [x] 重複ファイル検出 (ハッシュ値)
- [x] お気に入り機能
- [ ] ファイルプレビュー (将来実装)

#### テスト・最適化
- [x] 統合テスト (CLI環境) - 全6項目合格
- [ ] 実環境GUIテスト (Windows/macOS/Linux) - テスト手順書作成済み
- [ ] チームメンバー数名でのテスト
- [ ] パフォーマンスチューニング (測定未実施)
- [x] バグ修正 (Phase 1-5で実施)

#### リリース準備
- [x] Linuxプロダクションビルド（2025/11/5完了）
- [x] ユーザーマニュアル作成（2025/11/5完了）
- [x] リリースノート作成（2025/11/5完了）
- [ ] Windowsインストーラー作成（NSIS）
- [ ] macOSインストーラー作成（.dmg）
- [ ] 初回リリース（v0.1.0 Alpha）

### Phase 2: スマート機能追加
- [ ] 使用頻度学習の精度向上
- [ ] プロジェクト自動グルーピング
- [ ] 検索精度の改善
- [ ] UI/UX改善（フィードバックベース）

### Phase 3: AI機能追加（オプション）
- [ ] Ollama統合（自然言語検索）
- [ ] ChromaDB/LanceDB統合（意味検索）
- [ ] タグ提案の高精度化

## 7. パフォーマンス目標トラッキング

| 指標 | 目標値 | 現在値 | 達成状況 |
|-----|--------|--------|---------|
| 検索速度 | 0.5秒以内 | - | 未測定 |
| タグ提案精度 | 80%以上 | - | 未測定 |
| メモリ使用量 | 150MB以下 | - | 未測定 |
| 分析精度 | 95%以上 | - | 未測定 |
| 小容量ファイル分析 | 2秒以内 | - | 未測定 |

## 8. 次のステップ

### 即座に実施（2025/11/6）
1. **GitHubリリース公開** ⏱ 次のアクション
   - [x] リリース情報準備完了
   - [x] バイナリファイル準備完了（41MB）
   - [x] リリース手順書作成完了
   - [ ] GitHubリリースページで公開（手動作業）
   - 手順書: `docs/GITHUB_RELEASE_STEPS.md`

### 短期（1-2週間）
2. **Phase 10: クロスプラットフォームビルド**
   - Windows本番ビルド + MSIインストーラー作成
   - macOS本番ビルド + DMGインストーラー作成
   - Linux追加形式（.deb、.AppImage）

3. **ベータユーザー募集**
   - 5-10名のテスター募集
   - GitHub Issuesでフィードバック収集
   - 実環境GUIテスト実施

### 中期（1-2ヶ月）
4. **Phase 11: フィードバック収集と改善**
   - パフォーマンス実測（メモリ、CPU、検索速度）
   - バグ修正と改善
   - ユーザーフィードバック対応

### 長期（2-3ヶ月）
5. **Phase 12: v0.2.0開発**
   - 日付範囲フィルターUI実装
   - ファイルプレビュー機能
   - 自動スキャン機能
   - クラウドストレージ対応

## 9. E2Eテスト進捗管理

### 全体進捗
- **総テスト項目数**: 73項目
- **実装済み**: 0項目 (0%)
- **テスト成功**: 0項目 (0%)
- **テスト失敗**: 0項目 (0%)

### テスト分類別統計
- **正常系**: 22項目
- **お気に入り・ファイル操作**: 8項目
- **異常系**: 18項目
- **セキュリティ**: 10項目
- **レスポンシブ・UI/UX**: 8項目
- **パフォーマンス**: 7項目

### 優先度別統計
- **高優先度**: 35項目（必須）
- **中優先度**: 26項目（推奨）
- **低優先度**: 12項目（任意）

### S-001: メイン検索画面 E2Eテスト進捗表

#### Phase 1: 基本表示・検索機能（高優先度）

| テストID | テスト項目 | 依存ID | 実装 | 実行結果 | 備考 |
|----------|-----------|--------|------|----------|------|
| E2E-S001-001 | 画面初期表示 | なし | ⏳ | - | 全テストの起点 |
| E2E-S001-002 | ホットキー呼び出し | E2E-S001-001 | ⏳ | - | Tauri plugin使用 |
| E2E-S001-003 | キーワード検索（完全一致） | E2E-S001-001 | ⏳ | - | |
| E2E-S001-004 | キーワード検索（部分一致） | E2E-S001-001 | ⏳ | - | |
| E2E-S001-005 | キーワード検索（内容一致） | E2E-S001-001 | ⏳ | - | extractedTextから検索 |
| E2E-S001-006 | キーワード検索（タグ一致） | E2E-S001-001 | ⏳ | - | |

#### Phase 2: フィルター・タブ機能（高優先度）

| テストID | テスト項目 | 依存ID | 実装 | 実行結果 | 備考 |
|----------|-----------|--------|------|----------|------|
| E2E-S001-009 | ファイル種別フィルター（PDF） | E2E-S001-001 | ⏳ | - | |
| E2E-S001-010 | ファイル種別フィルター（複数選択） | E2E-S001-001 | ⏳ | - | |
| E2E-S001-012 | お気に入りタブ表示 | E2E-S001-001 | ⏳ | - | getFavorites() |
| E2E-S001-013 | 最近使用タブ表示 | E2E-S001-001 | ⏳ | - | getRecentFiles() |
| E2E-S001-014 | 検索結果タブ表示 | E2E-S001-012 | ⏳ | - | |

#### Phase 3: ファイル操作（高優先度）

| テストID | テスト項目 | 依存ID | 実装 | 実行結果 | 備考 |
|----------|-----------|--------|------|----------|------|
| E2E-S001-023 | お気に入り追加 | E2E-S001-003 | ⏳ | - | stopPropagation確認 |
| E2E-S001-024 | お気に入り解除 | E2E-S001-023 | ⏳ | - | |
| E2E-S001-025 | お気に入り切替後の再検索 | E2E-S001-024 | ⏳ | - | useSearchData実装 |
| E2E-S001-026 | ファイルを開く | E2E-S001-003 | ⏳ | - | onClick実装 |
| E2E-S001-027 | フォルダを開く | E2E-S001-003 | ⏳ | - | stopPropagation確認 |

#### Phase 4: エラー処理（高優先度）

| テストID | テスト項目 | 依存ID | 実装 | 実行結果 | 備考 |
|----------|-----------|--------|------|----------|------|
| E2E-S001-031 | 検索結果0件表示 | E2E-S001-001 | ⏳ | - | Empty state |
| E2E-S001-032 | 検索中のローディング表示 | E2E-S001-001 | ⏳ | - | isSearching=true |
| E2E-S001-033 | API接続エラー | E2E-S001-001 | ⏳ | - | error state |
| E2E-S001-034 | お気に入り切替エラー | E2E-S001-023 | ⏳ | - | catch処理 |
| E2E-S001-035 | ファイルを開くエラー | E2E-S001-026 | ⏳ | - | |
| E2E-S001-036 | フォルダを開くエラー | E2E-S001-027 | ⏳ | - | |
| E2E-S001-047 | エラー後の再検索 | E2E-S001-033 | ⏳ | - | setError(null) |

#### Phase 5: セキュリティ（高優先度）

| テストID | テスト項目 | 依存ID | 実装 | 実行結果 | 備考 |
|----------|-----------|--------|------|----------|------|
| E2E-S001-049 | XSS対策（検索ボックス） | E2E-S001-001 | ⏳ | - | React自動エスケープ |
| E2E-S001-050 | XSS対策（ファイル名表示） | E2E-S001-003 | ⏳ | - | |
| E2E-S001-051 | XSS対策（パス表示） | E2E-S001-003 | ⏳ | - | |
| E2E-S001-052 | XSS対策（タグ表示） | E2E-S001-003 | ⏳ | - | |
| E2E-S001-053 | ファイルアクセス権限チェック | E2E-S001-026 | ⏳ | - | Tauri plugin依存 |
| E2E-S001-054 | フォルダアクセス権限チェック | E2E-S001-027 | ⏳ | - | |
| E2E-S001-056 | SQLインジェクション対策 | E2E-S001-001 | ⏳ | - | SQLite FTS5使用 |

#### Phase 6: パフォーマンス（高優先度）

| テストID | テスト項目 | 依存ID | 実装 | 実行結果 | 備考 |
|----------|-----------|--------|------|----------|------|
| E2E-S001-067 | 検索速度（小規模） | E2E-S001-001 | ⏳ | - | 成功指標 |
| E2E-S001-068 | 検索速度（中規模） | E2E-S001-001 | ⏳ | - | SQLite FTS5最適化 |
| E2E-S001-070 | メモリ使用量（アイドル） | E2E-S001-001 | ⏳ | - | 成功指標 |
| E2E-S001-071 | メモリ使用量（検索中） | E2E-S001-003 | ⏳ | - | |
| E2E-S001-072 | CPU使用率（アイドル） | E2E-S001-001 | ⏳ | - | 成功指標 |

#### Phase 7: レスポンシブ（高優先度）

| テストID | テスト項目 | 依存ID | 実装 | 実行結果 | 備考 |
|----------|-----------|--------|------|----------|------|
| E2E-S001-059 | デスクトップウィンドウサイズ | E2E-S001-001 | ⏳ | - | Tauri config設定 |
| E2E-S001-060 | ウィンドウ最小サイズ | E2E-S001-001 | ⏳ | - | min-width設定 |

#### 中優先度テスト（26項目）

| テストID | テスト項目 | 依存ID | 実装 | 実行結果 | 備考 |
|----------|-----------|--------|------|----------|------|
| E2E-S001-007 | 検索デバウンス機能 | E2E-S001-001 | ⏳ | - | useSearchData内の実装 |
| E2E-S001-008 | 空キーワード検索 | E2E-S001-001 | ⏳ | - | |
| E2E-S001-011 | ファイル種別フィルター（解除） | E2E-S001-010 | ⏳ | - | toggleFileType実装 |
| E2E-S001-015 | ファイルアイコン表示（PDF） | E2E-S001-003 | ⏳ | - | getFileIcon実装 |
| E2E-S001-016 | ファイルアイコン表示（Excel） | E2E-S001-001 | ⏳ | - | |
| E2E-S001-017 | ファイルアイコン表示（Word） | E2E-S001-001 | ⏳ | - | |
| E2E-S001-018 | ファイルアイコン表示（PowerPoint） | E2E-S001-001 | ⏳ | - | |
| E2E-S001-019 | ファイルサイズ表示フォーマット | E2E-S001-003 | ⏳ | - | formatFileSize() |
| E2E-S001-020 | 相対時間表示フォーマット | E2E-S001-003 | ⏳ | - | formatRelativeTime() |
| E2E-S001-021 | タグバッジ表示 | E2E-S001-003 | ⏳ | - | |
| E2E-S001-028 | ファイル開く中のクリック防止 | E2E-S001-026 | ⏳ | - | |
| E2E-S001-029 | フォルダ開く中のクリック防止 | E2E-S001-027 | ⏳ | - | |
| E2E-S001-037 | 長いファイル名の表示 | E2E-S001-001 | ⏳ | - | CSS: truncate |
| E2E-S001-038 | 長いパスの表示 | E2E-S001-001 | ⏳ | - | CSS: truncate |
| E2E-S001-039 | 大量タグの表示 | E2E-S001-001 | ⏳ | - | CSS: flex-wrap |
| E2E-S001-042 | 空文字検索 | E2E-S001-001 | ⏳ | - | trim処理 |
| E2E-S001-043 | 特殊文字検索 | E2E-S001-001 | ⏳ | - | エスケープ処理 |
| E2E-S001-045 | 全フィルター未選択 | E2E-S001-001 | ⏳ | - | |
| E2E-S001-046 | タブ切替中のローディング | E2E-S001-012 | ⏳ | - | |
| E2E-S001-048 | 検索中の再検索防止 | E2E-S001-032 | ⏳ | - | 300msデバウンス |
| E2E-S001-055 | パストラバーサル対策 | E2E-S001-001 | ⏳ | - | バックエンド実装 |
| E2E-S001-057 | エラーメッセージの情報漏洩防止 | E2E-S001-033 | ⏳ | - | |
| E2E-S001-061 | ウィンドウ最大化 | E2E-S001-001 | ⏳ | - | max-w-4xl実装 |
| E2E-S001-062 | フィルターボタンの折り返し | E2E-S001-001 | ⏳ | - | flex-wrap実装 |
| E2E-S001-063 | 検索結果リストのスクロール | E2E-S001-003 | ⏳ | - | |
| E2E-S001-065 | キーボードナビゲーション | E2E-S001-001 | ⏳ | - | |
| E2E-S001-066 | 検索ボックスのフォーカス | E2E-S001-002 | ⏳ | - | 将来実装 |
| E2E-S001-069 | 検索速度（大規模） | E2E-S001-001 | ⏳ | - | |
| E2E-S001-073 | レンダリングパフォーマンス | E2E-S001-003 | ⏳ | - | 仮想スクロール検討 |

#### 低優先度テスト（12項目）

| テストID | テスト項目 | 依存ID | 実装 | 実行結果 | 備考 |
|----------|-----------|--------|------|----------|------|
| E2E-S001-022 | タグなしファイル表示 | E2E-S001-001 | ⏳ | - | 条件分岐 |
| E2E-S001-030 | ホバー時のスタイル変更 | E2E-S001-003 | ⏳ | - | hover:bg-gray-50 |
| E2E-S001-040 | 0バイトファイルの表示 | E2E-S001-001 | ⏳ | - | formatFileSize() |
| E2E-S001-041 | 未来日付の表示 | E2E-S001-001 | ⏳ | - | formatRelativeTime() |
| E2E-S001-044 | 非常に長いキーワード検索 | E2E-S001-001 | ⏳ | - | |
| E2E-S001-058 | ローカルストレージの使用確認 | E2E-S001-001 | ⏳ | - | Tauri独自ストレージ |
| E2E-S001-064 | タブ切替のアニメーション | E2E-S001-012 | ⏳ | - | Tabs component |

### 次の優先実装項目
1. **依存関係なしのテスト項目から開始**:
   - E2E-S001-001: 画面初期表示（全テストの起点）
   - E2E-S001-002: ホットキー呼び出し

2. **高優先度のテスト項目を優先**:
   - Phase 1-2: 基本表示・検索・フィルター機能
   - Phase 3: ファイル操作
   - Phase 4: エラー処理
   - Phase 5: セキュリティ
   - Phase 6-7: パフォーマンス・レスポンシブ

3. **実装進捗の更新方法**:
   - 実装完了時: ⏳ → ✅
   - テスト成功時: 実行結果 - → ✅
   - テスト失敗時: 実行結果 - → ❌（備考欄に詳細記載）

### E2Eテスト関連ドキュメント
- [メイン検索画面E2Eテスト仕様書](/docs/e2e-specs/main-search-screen-e2e.md) - 73項目の詳細テスト仕様

---

## 10. 技術的課題トラッキング

### 要検討事項
- N-gramトークナイザーの実装方法詳細化
- ファイルプレビューの実装方式選定
- 画面端自動収納UIの実装方式
- OneDrive/外部ドライブのポーリング間隔最適化

### 解決済み
- 技術スタック選定（Tauri 2.0 + Python + SQLite FTS5）
- 外部API不要確認（完全ローカル動作）
- ファイル解析ライブラリ選定（全てMITライセンス）

---

**最終更新日**: 2025年11月4日
**次回更新**: Phase 2（Git/GitHub管理）完了時

